# 开发备忘录

## 已完成事项

1. **基础地图实现**
   - 创建 H5 版本的地图系统（web/ 目录）
   - 实现图片缩放、拖拽功能
   - 支持触摸和鼠标事件

2. **显示效果优化**
   - 实现 cover 模式（图片铺满屏幕，保持宽高比）
   - 设置深色背景（#1a1a2e）避免白边

3. **边界限制**
   - 实现拖拽边界约束，防止图片移出屏幕
   - 优化缩放时的边界处理
   - 设置最小缩放比例为 cover 模式比例，确保图片始终覆盖屏幕

4. **小程序版本实现**
   - 实现微信小程序版本的地图系统
   - 使用官方组件（movable-area/movable-view）
   - 保持与 H5 版本一致的坐标系统
   - 实现图片缩放、拖拽功能
   - 设置最小缩放比例为初始缩放比例，确保图片始终覆盖屏幕
   - 实现拖拽边界限制，防止图片滑动到边界外

## 待办事项

1. **标记点基础功能**
   - 实现标记点（Marker）的数据结构
   - 实现标记点的渲染
   - 实现标记点的点击事件
   - 实现标记点信息弹窗显示

2. **坐标转换**
   - 实现屏幕坐标到地图坐标的转换
   - 实现地图坐标到屏幕坐标的转换

3. **动态标记点**
   - 实现动态新增标记点
   - 实现动态删除标记点

4. **标记点视觉优化**
   - 实现标记点视觉大小固定（不随缩放变化）

5. **高级标记点功能**
   - 实现标记点的长按事件
   - 实现标记点拖拽功能
   - 实现标记点拖拽边界限制

6. **性能优化**
   - 优化大量标记点的渲染性能
   - 实现标记点的懒加载

7. **功能增强**
   - 实现地图搜索功能
   - 实现路线规划功能
   - 实现地图图层切换

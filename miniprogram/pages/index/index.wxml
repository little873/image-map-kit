<view class="container">
  <!-- 加载状态 -->
  <view wx:if="{{!imageWidth || !imageHeight}}" class="loading">
    地图加载中...
  </view>
  
  <movable-area 
    wx:else
    class="movable-area"
  >
    <movable-view 
      id="mapView"
      class="movable-view"
      direction="all"
      scale="true"
      scale-min="{{initialScale || 1}}"
      scale-max="3"
      bindchange="onViewChange"
      style="width: {{imageWidth}}px; height: {{imageHeight}}px;"
      inertia="true"
    >
      <!-- 使用本地图片 -->
      <image src="/map.jpg" class="map-image" style="width: {{imageWidth}}px; height: {{imageHeight}}px;"></image>
      <!-- Markers -->
      <view 
        wx:for="{{markers}}" 
        wx:key="id" 
        class="marker"
        style="left: {{item.x}}px; top: {{item.y}}px;"
        bindtap="onMarkerTap"
        data-id="{{item.id}}"
      >
        <view class="marker-icon"></view>
      </view>
    </movable-view>
  </movable-area>
  
  <!-- 重置按钮 -->
  <view class="reset-btn" bindtap="resetView">
    重置视图
  </view>
</view>
